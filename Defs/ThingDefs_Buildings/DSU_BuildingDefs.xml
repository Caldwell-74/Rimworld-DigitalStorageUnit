<?xml version="1.0" encoding="utf-8"?>
<Defs>
    <ThingDef Name="DSU_BuildingBase" Abstract="True">
        <category>Building</category>
        <altitudeLayer>Building</altitudeLayer>
        <soundImpactDefault>BulletImpact_Metal</soundImpactDefault>
        <canOverlapZones>false</canOverlapZones>
        <constructEffect>ConstructMetal</constructEffect>
        <selectable>true</selectable>
        <drawerType>RealtimeOnly</drawerType>
        <terrainAffordanceNeeded>Light</terrainAffordanceNeeded>
        <repairEffect>Repair</repairEffect>
        <leaveResourcesWhenKilled>true</leaveResourcesWhenKilled>
        <filthLeaving>Filth_RubbleBuilding</filthLeaving>
        <statBases>
            <SellPriceFactor>0.70</SellPriceFactor>
            <Beauty>0</Beauty>
            <Mass>10</Mass>
            <Flammability>0.9</Flammability>
        </statBases>
        <thingCategories>
            <li>BuildingsFurniture</li>
        </thingCategories>
        <designationCategory>Furniture</designationCategory>
        <designatorDropdown>PRF_StorageGroup</designatorDropdown>
        <uiIconScale>0.7</uiIconScale>
        <tradeTags>
            <!-- todo! HSK?-->
            <li>Furniture</li>
        </tradeTags>
        <passability>PassThroughOnly</passability>
        <pathCost>70</pathCost>
        <fillPercent>0.5</fillPercent>
        <castEdgeShadows>true</castEdgeShadows>
        <rotatable>false</rotatable>
        <minifiedDef>MinifiedThing</minifiedDef>
        <staticSunShadowHeight>0.3</staticSunShadowHeight>
        <surfaceType>Item</surfaceType>
        <tickerType>Normal</tickerType>
        <researchPrerequisites>
            <li>DSU_Research</li>
        </researchPrerequisites>
        <constructionSkillPrerequisite>10</constructionSkillPrerequisite>
        <graphicData>
            <graphicClass>Graphic_Single</graphicClass>
        </graphicData>
        <building>
            <preventDeteriorationOnTop>true</preventDeteriorationOnTop>
            <ignoreStoredThingsBeauty>true</ignoreStoredThingsBeauty>
            <fixedStorageSettings>
                <priority>Normal</priority>
                <filter>
                    <categories>
                        <li>Root</li>
                    </categories>
                    <disallowedCategories>
                        <li>Animals</li>
                        <li>Plants</li>
                    </disallowedCategories>
                </filter>
            </fixedStorageSettings>
        </building>
    </ThingDef>

    <!--==================== Digital Storage Unit ====================-->
    <ThingDef ParentName="DSU_BuildingBase">
        <defName>DSU_DigitalStorageUnit_Building</defName>
        <label>Digital Storage Unit</label>
        <description>A matter-energy conversion based storage unit which can hold a large number of stacks, consuming 10 W of power per stack of items.\nIn the event of a power outage, items already inside will be safe, but the DSU will not be able to store more.\nDon't break/deconstruct it - items inside will be destroyed!</description>
        <thingClass>DigitalStorageUnit.Storage.Building_MassStorageUnitPowered</thingClass>
        <uiIconScale>0.9</uiIconScale>
        <pathCost>150</pathCost>
        <blockWind>true</blockWind>
        <fillPercent>1.0</fillPercent>
        <drawGUIOverlay>true</drawGUIOverlay>
        <terrainAffordanceNeeded>Heavy</terrainAffordanceNeeded>
        <staticSunShadowHeight>0.5</staticSunShadowHeight>
        <drawerType>MapMeshAndRealTime</drawerType>
        <graphicData>
            <texPath>Storage/CargoPlatform</texPath>
            <drawSize>(3,3)</drawSize>
            <damageData>
                <rect>(0.0,0,2.9,2.9)</rect>
                <cornerBL>Damage/Corner</cornerBL>
                <cornerTR>Damage/Corner</cornerTR>
            </damageData>
        </graphicData>
        <statBases>
            <Mass>50</Mass>
            <MaxHitPoints>450</MaxHitPoints>
            <WorkToBuild>5000</WorkToBuild>
            <MarketValue>10880</MarketValue>
            <Flammability>0.05</Flammability>
            <Beauty>0.5</Beauty>
        </statBases>
        <building>
            <preventDeteriorationOnTop>true</preventDeteriorationOnTop>
            <ignoreStoredThingsBeauty>true</ignoreStoredThingsBeauty>
            <defaultStorageSettings>
                <priority>Normal</priority>
                <filter>
                    <categories>
                        <li>Manufactured</li>
                        <li>ResourcesRaw</li>
                        <li>Items</li>
                        <li>BuildingsArt</li>
                        <li>Weapons</li>
                        <li>Apparel</li>
                        <li>BodyParts</li>
                    </categories>
                    <specialFiltersToDisallow>
                        <li>AllowRotten</li>
                    </specialFiltersToDisallow>
                </filter>
            </defaultStorageSettings>
        </building>
        <size>(3,3)</size>
        <costList>
            <Steel>300</Steel>
            <Gold>50</Gold>
            <Uranium>20</Uranium>
            <Plasteel>100</Plasteel>
            <ComponentIndustrial>100</ComponentIndustrial>
            <ComponentSpacer>15</ComponentSpacer>
            <PRF_MachineFrame_III>1</PRF_MachineFrame_III>
            <PRF_ElectronicChip_II>1</PRF_ElectronicChip_II>
        </costList>

        <inspectorTabs>
            <li>ITab_Storage</li>
            <li>DigitalStorageUnit.Storage.UI.ITab_Items</li>
        </inspectorTabs>
        <comps>
            <li Class="CompProperties_Glower">
                <glowRadius>6</glowRadius>
                <glowColor>(115,198,206,0)</glowColor>
            </li>
            <li Class="CompProperties_Power">
                <compClass>CompPowerTrader</compClass>
                <shortCircuitInRain>true</shortCircuitInRain>
                <basePowerConsumption>0</basePowerConsumption>
            </li>
            <li Class="DigitalStorageUnit.Common.CompProperties_CompOutputAdjustable"/>
            <li Class="CompProperties_Flickable"/>
        </comps>
        <modExtensions>
            <li Class="DigitalStorageUnit.Storage.Editables.DefModExtension_CanUseStorageIOPorts"/>
            <li Class="DigitalStorageUnit.Storage.Editables.DefModExtension_Crate">
                <limit>768</limit>
                <destroyContainsItems>true</destroyContainsItems>
            </li>
        </modExtensions>
    </ThingDef>

    <!--============================== Input Bus ==============================-->
    <ThingDef ParentName="DSU_BuildingBase">
        <defName>DSU_InputBus_Building</defName>
        <label>DSU Input Bus</label>
        <description>An input bus for the Digital Storage Unit. Pawns may store items into connected DSU through it.</description>
        <thingClass>DigitalStorageUnit.Storage.Building_StorageUnitIOPort</thingClass>
        <graphicData>
            <texPath>Storage/IO_Port</texPath>
            <graphicClass>Graphic_Single</graphicClass>
            <shaderType>CutoutComplex</shaderType>
            <damageData>
                <rect>(0.05,0.1,0.9,0.9)</rect>
                <cornerTL>Damage/Corner</cornerTL>
                <cornerTR>Damage/Corner</cornerTR>
            </damageData>
        </graphicData>
        <building>
            <isHopper>true</isHopper>
            <preventDeteriorationOnTop>true</preventDeteriorationOnTop>
            <ignoreStoredThingsBeauty>true</ignoreStoredThingsBeauty>
            <fixedStorageSettings>
                <priority>Normal</priority>
                <filter>
                    <categories>
                        <li>Root</li>
                    </categories>
                </filter>
            </fixedStorageSettings>
            <defaultStorageSettings>
                <priority>Normal</priority>
                <filter>
                    <categories></categories>
                </filter>
            </defaultStorageSettings>
        </building>
        <statBases>
            <WorkToBuild>750</WorkToBuild>
            <MaxHitPoints>100</MaxHitPoints>
            <MarketValue>1729</MarketValue>
            <Flammability>1.0</Flammability>
            <Mass>30</Mass>
        </statBases>
        <costList>
            <ComponentSpacer>1</ComponentSpacer>
            <PRF_MachineFrame_III>1</PRF_MachineFrame_III>
            <PRF_ElectronicChip_I>1</PRF_ElectronicChip_I>
        </costList>

        <inspectorTabs>
            <li>DigitalStorageUnit.Storage.UI.ITab_IOPortStorage</li>
            <li>DigitalStorageUnit.Storage.UI.ITab_Items</li>
        </inspectorTabs>
        <comps>
            <li Class="CompProperties_Power">
                <compClass>CompPowerTrader</compClass>
                <basePowerConsumption>300</basePowerConsumption>
            </li>
            <li Class="CompProperties_Flickable"/>
            <li Class="CompProperties_Glower">
                <glowRadius>2</glowRadius>
                <glowColor>(115,198,206,0)</glowColor>
            </li>
        </comps>
        <modExtensions>
            <li Class="DigitalStorageUnit.Storage.DefModExtension_StorageUnitIOPortColor">
                <inColor>(144, 222, 255, 255)</inColor>
                <outColor>(215, 169, 72, 255)</outColor>
            </li>
        </modExtensions>
    </ThingDef>

    <!--============================== Access Point ==============================-->
    <ThingDef ParentName="DSU_BuildingBase">
        <defName>DSU_AccessPoint_Building</defName>
        <label>DSU Access Point</label>
        <description>An interactive connection bus for the Digital Storage Unit. Pawns may request any item from the conneted Digital Storage Unit.</description>
        <thingClass>DigitalStorageUnit.Storage.Building_AdvancedStorageUnitIOPort</thingClass>
        <graphicData>
            <texPath>Storage/IO_Port</texPath>
            <graphicClass>Graphic_Single</graphicClass>
            <shaderType>CutoutComplex</shaderType>
            <damageData>
                <rect>(0.05,0.1,0.9,0.9)</rect>
                <cornerTL>Damage/Corner</cornerTL>
                <cornerTR>Damage/Corner</cornerTR>
            </damageData>
        </graphicData>
        <building>
            <isHopper>true</isHopper>
            <preventDeteriorationOnTop>true</preventDeteriorationOnTop>
            <ignoreStoredThingsBeauty>true</ignoreStoredThingsBeauty>
            <fixedStorageSettings>
                <priority>Normal</priority>
                <filter>
                    <categories>
                        <li>Root</li>
                    </categories>
                </filter>
            </fixedStorageSettings>
            <defaultStorageSettings>
                <priority>Normal</priority>
                <filter>
                    <categories></categories>
                </filter>
            </defaultStorageSettings>
        </building>
        <statBases>
            <WorkToBuild>750</WorkToBuild>
            <MaxHitPoints>100</MaxHitPoints>
            <MarketValue>1729</MarketValue>
            <Flammability>1.0</Flammability>
            <Mass>30</Mass>
        </statBases>
        <costList>
            <ComponentSpacer>1</ComponentSpacer>
            <PRF_MachineFrame_III>1</PRF_MachineFrame_III>
            <PRF_ElectronicChip_II>1</PRF_ElectronicChip_II>
        </costList>

        <inspectorTabs>
            <li>DigitalStorageUnit.Storage.UI.ITab_IOPortStorage</li>
            <li>DigitalStorageUnit.Storage.UI.ITab_Items</li>
        </inspectorTabs>
        <comps>
            <li Class="CompProperties_Power">
                <compClass>CompPowerTrader</compClass>
                <basePowerConsumption>300</basePowerConsumption>
            </li>
            <li Class="CompProperties_Flickable"/>
            <li Class="CompProperties_Glower">
                <glowRadius>2</glowRadius>
                <glowColor>(115,198,206,0)</glowColor>
            </li>
        </comps>
        <modExtensions>
            <li Class="DigitalStorageUnit.Storage.DefModExtension_StorageUnitIOPortColor">
                <inColor>(144, 222, 255, 255)</inColor>
                <outColor>(215, 169, 72, 255)</outColor>
            </li>
        </modExtensions>
    </ThingDef>

    <!--============================== Pusher ==============================-->
    <ThingDef ParentName="DSU_BuildingBase">
        <defName>DSU_Pusher_Building</defName>
        <label>DSU Pusher</label>
        <description>This modified ouput bus allows you to push items directly into next cell, onto a belt, or anywhere else, saving space instead of using a puller.</description>
        <thingClass>DigitalStorageUnit.Storage.Building_IOPusher</thingClass>
        <rotatable>true</rotatable>
        <graphicData>
            <texPath>Storage/IO_Pusher</texPath>
            <graphicClass>Graphic_Multi</graphicClass>
            <shaderType>CutoutComplex</shaderType>
            <damageData>
                <rect>(0.05,0.1,0.9,0.9)</rect>
                <cornerTL>Damage/Corner</cornerTL>
                <cornerTR>Damage/Corner</cornerTR>
            </damageData>
        </graphicData>
        <building>
            <isHopper>true</isHopper>
            <fixedStorageSettings>
                <priority>Normal</priority>
                <filter>
                    <categories>
                        <li>Root</li>
                    </categories>
                </filter>
            </fixedStorageSettings>
            <defaultStorageSettings>
                <priority>Normal</priority>
                <filter>
                    <categories></categories>
                </filter>
            </defaultStorageSettings>
        </building>
        <statBases>
            <WorkToBuild>1000</WorkToBuild>
            <MaxHitPoints>150</MaxHitPoints>
            <MarketValue>1956</MarketValue>
            <Flammability>1.0</Flammability>
            <Mass>30</Mass>
        </statBases>
        <costList>
            <ComponentSpacer>1</ComponentSpacer>
            <PRF_RoboticArm>1</PRF_RoboticArm>
            <PRF_MachineFrame_III>1</PRF_MachineFrame_III>
            <PRF_ElectronicChip_I>1</PRF_ElectronicChip_I>
        </costList>

        <placeWorkers>
            <li>DigitalStorageUnit.PlaceWorker_Arrow</li>
            <li>DigitalStorageUnit.Storage.PlaceWorker_IOPusherHilight</li>
        </placeWorkers>
        <drawPlaceWorkersWhileSelected>true</drawPlaceWorkersWhileSelected>

        <inspectorTabs>
            <li>DigitalStorageUnit.Storage.UI.ITab_IOPortStorage</li>
            <li>DigitalStorageUnit.Storage.UI.ITab_Items</li>
        </inspectorTabs>
        <comps>
            <li Class="CompProperties_Power">
                <compClass>CompPowerTrader</compClass>
                <basePowerConsumption>350</basePowerConsumption>
            </li>
            <li Class="CompProperties_Flickable"/>
            <li Class="CompProperties_Glower">
                <glowRadius>2</glowRadius>
                <glowColor>(115,198,206,0)</glowColor>
            </li>
        </comps>
        <modExtensions>
            <li Class="DigitalStorageUnit.Storage.DefModExtension_StorageUnitIOPortColor">
                <inColor>(144, 222, 255, 255)</inColor>
                <outColor>(215, 169, 72, 255)</outColor>
            </li>
        </modExtensions>
    </ThingDef>

</Defs>